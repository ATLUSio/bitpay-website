<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Displaying Invoices | BitPay Documentation</title><meta name="description" content="Bitcoin payments, deposited to your bank account. Offer your customers the world’s fastest and safest payment option."><!-- Twitter Card data--><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@BitPay"><meta name="twitter:title" content="BitPay – Accept Bitcoin"><meta name="twitter:description" content="Bitcoin payments, deposited to your bank account. Offer your customers the world’s fastest and safest payment option."><meta name="twitter:image" content="/images/social/bitpay-avatar-1200.1a1cbade.jpg"><!-- Open Graph data (Facebook and Reddit)--><meta property="og:title" content="BitPay – Accept Bitcoin"><meta property="og:type" content="article"><meta property="og:url" content="https://bitpay.com/"><meta property="og:image" content="/images/social/bitpay-avatar-1200.1a1cbade.jpg"><meta property="og:description" content="Bitcoin payments, deposited to your bank account. Offer your customers the world’s fastest and safest payment option."><meta property="og:site_name" content="BitPay"><!-- Add to homescreen for Chrome on Android--><meta name="mobile-web-app-capable" content="yes"><link rel="icon" sizes="192x192" href="/bitpay-website/images/touch/android-chrome-192x192.75d08d98.png"><!-- Add to homescreen for Safari on iOS--><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="apple-mobile-web-app-title" content="BitPay Website"><link rel="apple-touch-icon" sizes="152x152" href="/bitpay-website/images/touch/apple-touch-icon-152x152.defe1759.png"><link rel="apple-touch-icon" sizes="180x180" href="/bitpay-website/images/touch/apple-touch-icon-180x180.e27b79f7.png"><!-- Tile icon for Win8 (144x144 + tile color)--><meta name="msapplication-TileImage" content="/images/touch/ms-touch-icon-144x144-precomposed.png"><meta name="msapplication-TileColor" content="#1D3E92"><!-- Favicon--><link rel="shortcut icon" href="/bitpay-website/favicon.ico"><link rel="stylesheet" href="/bitpay-website/styles/main.9b1beac8.css" data-instant-track><link rel="stylesheet" type="text/css" href="/bitpay-website//fonts.googleapis.com/css?family=Karla:400,400italic,700"><script type="text/javascript" data-no-instant>
  !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","group","track","ready","alias","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="3.0.1";
  if(this.location.host === 'bitpay.com'){ analytics.load('wnr2h1ly5s'); } else if(this.location.host === 'test.bitpay.com'){ analytics.load("qsi42b1dn7"); } else if(this.location.host.split(':')[0] === 'localhost' || this.location.host.split(':')[1] === '8088'){ analytics.load("q50cjcd7tx"); } else if(this.location.host.split(':')[0] === 'file'){ analytics.load("aggkeymxlk"); } else { analytics.load("xT31BDiOQK9CN6PICpxAhFqHacoLc2VP"); }}}();
</script>
<script src="/bitpay-website//cdn.optimizely.com/js/2395520134.js" data-no-instant></script>
<script data-no-instant>
  var $buoop = {vs:{i:9,f:30,o:25,s:5.1},c:2};
  function $buo_f(){
   var e = document.createElement("script");
   e.src = "//browser-update.org/update.js";
   document.body.appendChild(e);
  };
  try {document.addEventListener("DOMContentLoaded", $buo_f,false)}
  catch(e){window.attachEvent("onload", $buo_f)}
</script>
</head><body><div data-offcanvas class="off-canvas-wrap container white-header"><div class="inner-wrap"><div class="bg-dark"><div role="navigation" class="row"><div class="column small-1"><a href="/bitpay-website/" title="Home" class="logo margin-top"></a></div><div class="column small-11 show-for-large-up"><ul class="inline-list right padding-top-less medium-padding-top"><li><a href="/bitpay-website/integrations" title="Integrations" class="menu-item">Integrations</a></li><li><a href="/bitpay-website/api" title="API" class="menu-item">API</a></li><li><a href="/bitpay-website/docs" title="Docs" class="menu-item active">Docs</a></li><li><a href="/bitpay-website/dashboard/signup" title="Sign Up" class="menu-item">Sign Up</a></li><li><a href="/bitpay-website/dashboard/login/" title="Log In" class="menu-item login-btn">Log In</a></li></ul></div><div class="column small-3 hide-for-large-up margin-top"><a href="javascript:;" class="right-off-canvas-toggle menu-icon right"><span></span></a></div></div><aside class="right-off-canvas-menu"><ul class="no-bullet padding-left padding-top-less"><li><a href="/bitpay-website/integrations" title="Integrations" class="menu-item">Integrations</a></li><li><a href="/bitpay-website/api" title="API" class="menu-item">API</a></li><li><a href="/bitpay-website/docs" title="Docs" class="menu-item active">Docs</a></li><li><a href="/bitpay-website/dashboard/signup" title="Sign Up" class="menu-item">Sign Up</a></li><li><a href="/bitpay-website/dashboard/login/" title="Log In" class="menu-item login-btn">Log In</a></li></ul></aside></div><div class="row padding-vertical medium-padding-bottom-most"><div class="column large-5 xlarge-3"><ul class="side-nav large-border-right-gray padding-right-less"><li class="uppercase h3">Documentation</li><li><a href="/bitpay-website/docs" title="Getting Started">Getting Started</a></li><li><a href="/bitpay-website/docs/ecommerce" title="Selling Online">Selling Online</a></li><li><a href="/bitpay-website/docs/retail" title="Selling in Person">Selling in Person</a></li><li><a href="/bitpay-website/docs/settlement" title="Banking &amp; Settlements">Banking &amp; Settlements</a></li><li class="divider"></li><li class="uppercase h3">Use Cases</li><li><a href="/bitpay-website/docs/billing" title="Email Billing">Email Billing</a></li><li><a href="/bitpay-website/docs/donations" title="Donations">Donations</a></li><li class="divider"></li><li class="uppercase h3">Development</li><li><a href="/bitpay-website/docs/create-invoice" title="Creating Invoices">Creating Invoices</a></li><li><a href="/bitpay-website/docs/display-invoice" title="Displaying Invoices" class="active">Displaying Invoices</a></li><li><a href="/bitpay-website/docs/invoice-callbacks" title="Invoice Callbacks">Invoice Callbacks</a></li><li><a href="/bitpay-website/docs/invoice-states" title="Invoice States">Invoice States</a></li><li class="divider"></li><li class="uppercase h3">Resources</li><li><a href="/bitpay-website/docs/wallets" title="Bitcoin Wallet Comparison">Bitcoin Wallet Comparison</a></li><li><a href="/bitpay-website/bitcoin-exchange-rates" title="BBB Exchange Rate">BBB Exchange Rate</a></li><li><a href="https://support.bitpay.com">Help &amp; Support</a></li></ul></div><div class="column large-7 xlarge-9"><h2 class="header__bottom-border-left">Displaying Invoices</h2><p class="lead">Because Bitcoin works as a push transaction, rather than using the traditional authorize and capture process (pull) as does a credit card, you must accomodate this in your checkout flow.</p><p>While a traditional checkout flow would collect credit card info and then present a “finalize order” page and subsequently charge the card, with Bitcoin, no details need to be collected prior to confirmation. A click on “confirm order” should present a modal or blocking payment screen which will provide a bitcoin invoice for payment, then proceed to confirmation once the payment is received.</p><h3>Redirect to BitPay</h3><p>The simplest integration is to simply redirect your customer to the BitPay site to complete payment, then return them to your site for order confirmation. In this case, you need only redirect your customer to the <code>url</code> returned in the JSON response from the <code>/invoices</code> endpoint.</p><p>You can do this most easily by using one of <a href="/bitpay-website/integrations/#plugins">our supported integrations</a> or directly with one of <a href="/bitpay-website/integrations/#code-libraries">our supported libraries</a>.</p><p>The BitPay invoice uses responsive design to ensure that the user gets optimal presentation regardless of device form factor.</p><p>Be sure that you have also set the <code>redirectURL</code> when generating the invoice, which will ensure that the user gets redirected to the appropriate confirmation page following payment.</p><p>You should always validate that the invoice was paid by re-querying the BitPay API, or by manually validating that it appears in your account ledger, before completing the transaction.</p><h3>Embedded Invoice (iFrame)</h3><p>BitPay allows you to embed the invoice on your website, so the shopper never has to leave your site during the checkout process.</p><ol><li>When you create an invoice with a POST request to BitPay, BitPay returns the <code>url</code> field, which is the URL at which this invoice can be viewed.</li><li>To display the embedded invoice on your page, append the code <code>&view=iframe</code> to the invoice URL and specify this value as the <code>src</code> in an iframe.</li><li>The embedded invoice will automatically update when payments have been received. In addition to the server IPN sent to your <code>notificationURL</code>, the iframe will send a POST message to the parent window that the status has changed.</li></ol><p>If your website has a dark background theme, append the code <code>&theme=dark</code> to the invoice URL. Note that the iframe background color is transparent.</p><pre class="margin-bottom">&lt;iframe id="bitpay_invoice_iframe"
  scrolling="no"
  allowtransparency="true"
  frameborder="0"  src='https://test.bitpay.com/invoice?id=LxuN1nQwB3UKTVuamJeLSi&view=iframe'
  style='width:500px; overflow: hidden; padding:20px; max-width:100%'&gt;
&lt;/iframe&gt;
</pre><h4>Post to Parent Window</h4><p>When an invoice is presented in an iframe you have an option to receive invoice status updates in the parent window. This option is useful for updating the parent window presentation or redirecting the parent window to another URL after the invoice has been paid.</p><p>When the invoice iframe receives a status update from the BitPay server the new status is posted from the invoice iframe to the parent window via the Window.postMessage method and passing <code>{status: string}</code> where <code>status</code> can be any of the <a href="/bitpay-website/invoice-states">Invoice States</a> according to the descriptions provided.</p><p>Your implementation should take into consideration the browser support for this method. See <a href="http://caniuse.com/#feat=x-doc-messaging">CanIUse</a> for a list of browsers supporting <code>Window.postMessage</code>.</p><p>Following is an HTML code example illustrating a simple interaction between an invoice iframe and its parent document.</p><pre class="margin-bottom">&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;Parent&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;p&gt;Invoice status: &lt;span id="s1"&gt;&lt;/span&gt;
    &lt;iframe src="https://bitpay.com/invoice?id=UbAd3j1E7ivCe5i9t88obd" style="width: 800px; height: 800px;"&gt;&lt;/iframe&gt;
    &lt;script language="javascript"&gt;
  window.addEventListener("message", function(event) {
      document.getElementById("s1").innerHTML=event.data.status;
  }, false);
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</pre><h3>Custom Invoices</h3><p>There are instances when it is not possible to directly display the presentation of a BitPay server generated HTML invoice (either the full page or the iframe). This occurs when the system requesting an invoice is interacting with the customer via a device that does not directly present or render HTML content. Example use cases include:</p><ul><li>Proprietary gaming platforms</li><li>Custom embedded display devices (gas pump, kiosk device)  </li></ul><p>Constructing an invoice typically requires that the implementation generate it’s own QR (Quick Response) code, enabling custom interaction with a Bitcoin wallet, and/or making the bitcoin address visible to receive payment. Additional considerations include:</p><ul><li>Time limit - the client must ensure that presentation of the invoice does not exceed the maximum time allowed by BitPay to present payment. Currently the time limit is 15 minutes.</li><li>Prices - the invoice should display both the bitcoin price as well as the local currency price. It is not recommended to display the bitcoin/local currency exchange rate as this could be confusing to the buyer.</li><li>Bitcoin address - in some settings it may be convenient to display (or otherwise present) the bitcoin address for copy and paste. This is useful if the buyer must transfer the bitcoin address to their bitcoin wallet manually.</li><li>Other information - details about the product or service being purchased, an order identifier, the merchant name, address, etc.</li></ul><h4>Invoice Status Updates</h4><p>Use of the BitPay server provided invoice URL for presentation of the invoice includes the benefit of the client presented invoice receiving socket messages from the BitPay server when invoice status changes. For example, subsequent to paying an invoice the BitPay server will update the status of the invoice and send that status via a direct socket connection between the BitPay server and the invoice presenting web browser client. When presenting a custom invoice this socket connection is not possible. The only means for updating the presentation of the invoice (e.g., to show ‘paid’ status) is to receive the invoice IPN at your server and then to update your invoice presentation (e.g., using AJAX) at the client.</p><h4>Generating a Custom QR Code Image</h4><p>The QR code is a digitally encoded image that contains the Bitcoin payment URI. The BitPay server supports both the old style (BIP 72) Bitcoin protocol (for backwards compatibility) as well as the new style (BIP 73) Bitcoin Payment Protocol.</p><p>When choosing to generate your own QR code image you must make a choice between the two style of URI you wish to encode in the image. For maximum compatibility with wallets you should choose to encode the BIP 72 compatible URI. This URI scheme can be scanned successfully by all existing Bitcoin wallets. As more wallets provide support for the Bitcoin Payment Protocol you may choose to switch from using the BIP 72 compatible URI to the BIP 73 compatible URI. The density of a BIP 72 QR code is higher than that of a BIP 73 QR code and may result in increased scanning errors.</p><p>Attached in the invoice payload are different <code>paymentUrls</code> which can be encoded according to your implementation preferences:</p><pre class="margin-bottom">"paymentUrls": {
  "BIP21": "bitcoin:mvYRECDxKPaPHnjNz9ZxiTpbx29xYNoRy4?amount=0.3745",
  "BIP72": "bitcoin:mvYRECDxKPaPHnjNz9ZxiTpbx29xYNoRy4?amount=0.3745&r=https://bitpay.com/i/NKaqMuZWy3BAcP77RdkEEv",
  "BIP72b": "bitcoin:?r=https://bitpay.com/i/NKaqMuZWy3BAcP77RdkEEv",
  "BIP73": "https://bitpay.com/i/NKaqMuZWy3BAcP77RdkEEv"
}
</pre><a href="/bitpay-website/docs/invoice-callbacks" class="btn btn-blue-border uppercase bold arrow-blue margin-top">Instant Payment Notifications (IPNs)</a></div></div><div style="position: relative; z-index: 1" class="padding-vertical bg-dark"><div class="row"><div class="column small-12"><ul class="small-block-grid-1 medium-block-grid-2 large-block-grid-3 xlarge-block-grid-6"><li><h6 class="bold uppercase white-opacity body-text__bottom-border">Platform</h6><ul class="no-bullet"><li><a href="/bitpay-website/tour" class="white-link--opacity">Tour</a></li><li><a href="/bitpay-website/features" class="white-link--opacity">Features</a></li><li><a href="/bitpay-website/integrations" class="white-link--opacity">Integrations</a></li><li><a href="/bitpay-website/pricing" class="white-link--opacity">Pricing</a></li></ul></li><li><h6 class="bold uppercase white-opacity body-text__bottom-border">Docs</h6><ul class="no-bullet"><li><a href="/bitpay-website/docs" class="white-link--opacity">Getting Started</a></li><li><a href="/bitpay-website/docs/ecommerce" class="white-link--opacity">Selling Online</a></li><li><a href="/bitpay-website/docs/retail" class="white-link--opacity">Selling in Store</a></li><li><a href="/bitpay-website/api" class="white-link--opacity">API &amp; SDKs</a></li><li><a href="/bitpay-website/docs/settlement" class="white-link--opacity">Settlement</a></li></ul></li><li><h6 class="bold uppercase white-opacity body-text__bottom-border">Resources</h6><ul class="no-bullet"><li><a href="https://support.bitpay.com" class="white-link--opacity">Help &amp; Support</a></li><li><a href="/bitpay-website/bitcoin-exchange-rates" class="white-link--opacity">Exchange Rates</a></li></ul></li><li><h6 class="bold uppercase white-opacity body-text__bottom-border">Open Source</h6><ul class="no-bullet"><li><a href="http://bitcore.io/" class="white-link--opacity">Bitcore</a></li><li><a href="https://copay.io/" class="white-link--opacity">Copay</a></li><li><a href="https://labs.bitpay.com/" class="white-link--opacity">Forums</a></li><li><a href="https://github.com/bitpay" class="white-link--opacity">GitHub</a></li></ul></li><li><h6 class="bold uppercase white-opacity body-text__bottom-border">Company</h6><ul class="no-bullet"><li><a href="/bitpay-website/about" class="white-link--opacity">About</a></li><li><a href="/bitpay-website/about/team" class="white-link--opacity">Team</a><span class="footer-label">we're hiring!</span></li><li><a href="/bitpay-website/about/press" class="white-link--opacity">Press</a></li><li><a href="http://blog.bitpay.com" class="white-link--opacity">Blog</a></li></ul></li><li><div class="left"></div><div style="clear:both;"></div><ul style="margin-top:3px;" class="inline-list"><li style="margin-left:0;"><a href="http://www.twitter.com/bitpay" target="blank" style="background-image: url('/bitpay-website/images/twitter.d6e664ac.svg')" class="social-icon white-link--opacity"></a></li><li><a href="http://www.github.com/bitpay" target="blank" style="background-image: url('/bitpay-website/images/github.c54a598c.svg')" class="social-icon white-link--opacity"></a></li><li><a href="http://www.linkedin.com/company/bitpay-inc-" target="blank" style="background-image: url('/bitpay-website/images/linkedin.2638c83b.svg')" class="social-icon white-link--opacity"></a></li></ul></li></ul></div></div><div class="row padding-top-less margin-top-less border-top-light"><div class="column medium-6"><ul class="inline-list"><li style="margin-left:0;"><small><a href="/bitpay-website/about/terms" class="white-link--opacity">Terms of Use</a></small></li><li><small><a href="/bitpay-website/about/privacy" class="white-link--opacity">Privacy Policy</a></small></li></ul></div><div class="column medium-6"><ul class="inline-list medium-float-right"><li style="margin-left:0;" class="white-opacity"><small>&copy;2015 BitPay, Inc.</small></li><li><a href="/bitpay-website/" class="logo footer-logo white-link--opacity"></a></li></ul></div></div></div><a class="exit-off-canvas"></a></div></div><script src="/bitpay-website/scripts/main.min.213a2de3.js" data-no-instant="data-no-instant"></script></body></html>